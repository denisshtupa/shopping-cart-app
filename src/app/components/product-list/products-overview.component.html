<div class="main-container">
  <h2 class="text-center">{{title}}</h2>

  <div *ngIf="productList?.length > 0" class="p-toolbar toolbar-section">
    <div class="p-inputgroup search-area">
      <span class="p-inputgroup-addon">
        <i class="pi pi-search"></i>
      </span>
      <input
        pInputText
        [(ngModel)]="searchValue"
        (keyup)="onSearchTyping($event.target.value)"
        placeholder="Search for products"
        type="text"
      >
    </div>

    <div>
      <i class="pi pi-shopping-cart main-shopping-cart" pBadge [value]="numberOfProductsInCart() > 0 ? numberOfProductsInCart() : 0"></i>
    </div>
  </div>

    <p-table
      *ngIf="productList?.length > 0"
      [value]="filteredProducts"
      [paginator]="false"
    >
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="4" style="text-align: center;">
            No results found
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th class="table-header-cell">Name</th>
          <th class="table-header-cell table-header-cell-c-pointer" (click)="sortProducts()" [title]="!isAscendingSort ? 'Reorder ASC' : 'Reorder DESC'">
            Price
            <ng-container>
              <span *ngIf="isAscendingSort && ordered != ''" class="pi pi-sort-amount-down-alt cart-icon"></span>
              <span *ngIf="!isAscendingSort && ordered != ''" class="pi pi-sort-amount-down cart-icon"></span>
            </ng-container>
          </th>
          <th class="table-header-cell">Quantity</th>
          <th class="table-header-cell">Add to cart</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product let-i="rowIndex">
        <tr [style.text-align]="'center'">
          <td class="cursor-pointer text-center-aligned">{{ product.name }}</td>
          <td class="text-center-aligned">{{ formatToGermanCurrency(product.price) }}</td>
          <td class="td-actions text-center-aligned">
            <ng-container>

              <span
                class="pi pi-minus-circle cursor-pointer quantity-icon quantity-icon-remove"
                [title]="product.quantity != 0 ? 'Remove 1 ' + product.name : ''"
                [class.disabled-icon]="product.quantity == 0"
                (click)="removeQuantity(product)"
              ></span>
              {{ product.quantity }}
              <span
                class="pi pi-plus-circle cursor-pointer quantity-icon quantity-icon-add"
                [title]="product.quantity != 20 ? 'Add 1 ' + product.name : ''"
                [class.disabled-icon]="product.quantity >= 20"
                (click)="addQuantity(product)"
              ></span>
            </ng-container>
          </td>

          <td class="td-actions text-center-aligned">
            <ng-container>
              <span
                class="pi pi-cart-plus cursor-pointer checkout-icon"
                [title]="product.quantity != 0 && !product.onCart ? 'Add ' + product.name + ' to cart': ''"
                [style.color]="!product.onCart && product.quantity != 0 ? 'green' : 'gray'"
                [class.disabled-icon]="product.onCart || product.quantity == 0"
                (click)="addOnCart(product)"
              ></span>
              <span
                class="pi pi-trash cursor-pointer checkout-icon"
                [title]="product.quantity != 0 && product.onCart ? 'Remove ' + product.name + ' from cart': ''"
                [style.color]="product.onCart ? 'red' : 'gray'"
                [class.disabled-icon]="!product.onCart"
                (click)="removeFromCart(product)"
              ></span>
            </ng-container>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <!-- <h3 *ngIf="filteredProducts.length == 0" kstyle="margin-left:40px;">No results found</h3> -->

  <!-- <div class="table-responsive margin-top-base" *ngIf="this.productList?.length > 0">
    <table *ngIf="this.filteredProducts.length > 0" class="table table-striped table-no-bordered" cellspacing="0">
      <thead>
        <tr [style.text-align]="'center'">
          <th class="cursor-pointer" [style.width]="'20%'">Name
          </th>
          <th class="cursor-pointer" [style.width]="'20%'" (click)="sortProducts()"
            [title]="!this.isAscendingSort ? 'Reorder ASC' : 'Reorder DESC'">Price
            <ng-container>
              <span *ngIf="this.isAscendingSort && this.ordered != ''" class="material-icons cart-icon">
                keyboard_arrow_down
              </span>
              <span *ngIf="!this.isAscendingSort && this.ordered != ''" class="material-icons cart-icon">
                keyboard_arrow_up
              </span>
            </ng-container>
          </th>
          <th [style.width]="'30%'">Quantity
          </th>
          <th [style.width]="'30%'">Add to cart
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of filteredProducts; let i = index;" [style.text-align]="'center'">
          <td class="cursor-pointer">
            {{product.name}}
          </td>
          <td>
            {{formatToGermanCurrency(product.price)}}
          </td>
          <td class="td-actions">
            <ng-container>
              <span class="material-icons cursor-pointer remove-icon"
                [title]="product.quantity != 0 ? 'Remove 1 ' + product.name : ''"
                [class.disabled-icon]="product.quantity == 0" (click)="removeQuantity(product)">
                remove_circle_outline
              </span>
              {{product.quantity}}
              <span class="material-icons cursor-pointer add-icon"
                [title]="product.quantity != 20 ? 'Add 1 ' + product.name : ''"
                [class.disabled-icon]="product.quantity >= 20" (click)="addQuantity(product)">
                add_circle_outline
              </span>
            </ng-container>
          </td>

          <td class="td-actions">
            <ng-container>
              <span class="material-icons cursor-pointer cart-icon"
                [title]="product.quantity != 0 && !product.onCart ? 'Add ' + product.name + ' to cart': ''"
                [style.color]="!product.onCart && product.quantity != 0 ? 'green' : 'gray'"
                [class.disabled-icon]="product.onCart || product.quantity == 0" (click)="addOnCart(product)">
                add_shopping_cart
              </span>

              <span class="material-icons cursor-pointer cart-icon"
                [title]="product.quantity != 0 && product.onCart ? 'Remove ' + product.name + ' form cart': ''"
                [style.color]="product.onCart ? 'red' : 'gray'" [class.disabled-icon]="!product.onCart"
                (click)="removeFromCart(product)">
                remove_shopping_cart
              </span>
            </ng-container>
          </td>
        </tr>
      </tbody>
    </table>

    <h3 *ngIf="this.filteredProducts.length == 0" style="margin-left:40px;">No results found</h3>
  </div>
</div> -->

<!-- <ng-template #template>
  <custom-modal [products]="productList" (closeModalClicked)="closeModalHandler()"></custom-modal>
</ng-template> -->
